<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Brain MRI Segmentation</title>
  <script src="https://unpkg.com/htmx.org@1.9.12"></script>
  <style>
    body { font-family: Arial, sans-serif; max-width: 900px; margin: 30px auto; }
    h1 { text-align: center; }
    .gallery { display: flex; gap: 10px; flex-wrap: wrap; justify-content: center; }
    .gallery img { width: 150px; height: 150px; object-fit: cover; cursor: pointer; border-radius: 6px; border: 2px solid transparent; }
    .gallery img:hover { border-color: #007bff; }
    .result { margin-top: 20px; }
  </style>
</head>
<body>
  <h1>Brain MRI Segmentation (U-Net)</h1>
  <p>
  This demo showcases a <b>U-Netâ€“based deep learning model</b> for automatic 
  <b>brain MRI tissue segmentation</b>. 
  By selecting one of the trained U-Net models and an example MRI slice, 
  you can visualize how the model partitions brain structures such as 
  <i>gray matter</i> and <i>white matter</i>. 
</p>
<p>
  The three model options correspond to <b>different training epochs</b> 
  (<i>early, mid, late</i>). Comparing them allows you to see how the segmentation 
  quality evolves as the network learns:<br>  
  - Early epochs may produce rough or incomplete masks.<br>  
  - Later epochs tend to refine boundaries and improve accuracy.  
</p>

  <!-- Step 1: Model Selection -->
  <div>
    <label for="model"><b>Choose Model:</b></label>
    <select id="model" name="model">
      <option value="unet_epoch2.pth">U-Net v1</option>
      <option value="unet_epoch9.pth">U-Net v2</option>
      <option value="unet_epoch20.pth">U-Net v3</option>
    </select>
  </div>

  <hr>

  <!-- Step 2: Example Images -->
  <h3>Select Example Image</h3>
  <div class="gallery">
    {% for img in example_images %}
      <img 
        src="/static/examples/{{ img }}" 
        hx-post="/segment" 
        hx-include="#model" 
        hx-vals='{"image_name": "{{ img }}"}'
        hx-target="#result-container" 
        hx-swap="innerHTML">
    {% endfor %}
  </div>

  <!-- Step 3: Result -->
  <div id="result-container" class="result"></div>
</body>
</html>
